/* -*- Mode: Text -*- */

autogen definitions options;

#define XML2AG

#include agen5/opts.def

export = "
\#include <stdio.h>
\#include <unistd.h>
\#include <errno.h>
\#include <limits.h>
\#include <stdlib.h>
\#include <string.h>

extern FILE* outFp;";

flag = {
    name        = output;
    value       = O;
    arg_type    = string;
    arg_name    = file;
    descrip     = "Output file in lieu of AutoGen processing";
    doc =
    "By default, the output is handed to an AutoGen for processing.\n"
    "However, you may save the definitions to a file instead.";

    flag_code = << FLAG_CODE_END
    if (strcmp( pOptDesc->pzLastArg, "-" ) == 0)
        return;

    if (freopen( pOptDesc->pzLastArg, "w", stdout ) == NULL) {
        fprintf( stderr, "Error %d (%s) opening `%s' for output",
                 errno, strerror( errno ), pOptDesc->pzLastArg );
        exit( EXIT_FAILURE );
    }
FLAG_CODE_END ;
};


explain = <<-  END_EXPLAIN
	This program will convert any arbitrary XML file into equivalent
	AutoGen definitions.
	END_EXPLAIN ;

detail = <<-  END_DETAIL
	The template will be derived from the first of the following:
	1.  the ``--override-tpl'' command line option
	2.  a top level XML definition for "template".
	3.  the base name of the input (or ``--base-name'' option) plus ".tpl".
	END_DETAIL ;

/* end of opts.def */
