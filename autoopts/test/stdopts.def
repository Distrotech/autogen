#! /bin/sh
# Last Modified:     $Date: 2002/03/29 02:21:47 $
# ident              $Id: stdopts.def,v 3.1 2002/03/29 02:21:47 bkorb Exp $

#  This is the standard set of options for testing option processing
#  It is expected to be dot

exec 5> $testname.def
cat >&5 <<_EOF_

AutoGen definitions options;

prog_name  = "test_${testname}";
prog_title = "Test AutoOpts for ${testname}";
_EOF_

echo test_main $test_main
if [ -n "${test_main}" ]
then
  echo "test_main  = '${test_main}';" >&5
fi

echo argument $argument
if [ -n "${argument}" ]
then
  echo "argument   = '${argument}';" >&5
fi

echo long_opts $long_opts
if [ -n "${long_opts}" ]
then
  echo "long_opts;" >&5
fi

for flag
do
    case "$flag" in
    ?*:?* )
        arg=`echo $flag | sed 's/.*://'`
	flag=`echo $flag | sed 's/:.*//'`
	arg="    arg_type = string; arg_default = '$arg';"
	;;

    ?*=[0-9]* )
        arg=`echo $flag | sed 's/.*=//'`
	flag=`echo $flag | sed 's/=.*//'`
	arg="    arg_type = number; arg_default = '$arg';"
	;;

    ?*: )
	flag=`echo $flag | sed 's/://'`
	arg="    arg_type = 'string';"
	;;

    ?*= )
	flag=`echo $flag | sed 's/=//'`
	arg="    arg_type = 'number';"
	;;

    * )
	unset arg
	;;
    esac

    cat <<-_EOF_
	flag = {
	    name = "$flag";
	    descrip = "The $flag option descrip";
	_EOF_

    if ${use_flags}
    then
	echo "    value = '`echo $flag | sed 's/\(.\).*/\1/'`';"
    fi
    [ -n "${arg}" ] && echo "${arg}"
    echo "};"
    echo
done >&5

exec 5>&-
