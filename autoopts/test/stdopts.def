#! /bin/echo this_file_should_be_sourced,_not_executed
#  -*- Mode: Shell-script -*-

#  This is the standard set of options for testing option processing
#  It is expected to be dot

exec 5> $testname.def
cat >&5 <<_EOF_

AutoGen definitions options;

prog_name  = "test_${testname}";
prog_title = "Test AutoOpts for ${testname}";
_EOF_

if [ -n "${test_main}" ]
then
  echo "test_main  = '${test_main}';" >&5
fi

if [ -n "${argument}" ]
then
  echo "argument   = '${argument}';" >&5
fi

if [ -n "${long_opts}" ]
then
  echo "long_opts;" >&5
fi

echo >&5

for flag
do
    case "$flag" in
    *: )
	flag=`echo $flag | sed 's/://'`
	arg="    flag_arg = ':';"
	;;
    * )
	unset arg
	;;
    esac

    cat <<-_EOF_
	flag = {
	    name = "$flag";
	    descrip = "The $flag option descrip";
	_EOF_

    if ${use_flags}
    then
	echo "    value = '`echo $flag | sed 's/\(.\).*/\1/'`';"
    fi
    [ -n "${arg}" ] && echo "${arg}"
    echo "};"
    echo
done >&5

exec 5>&-
