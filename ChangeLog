2002-03-01  Bruce Korb  <bkorb@gnu.org>

	* agen5/expOutput.c(ag_scm_out_pop): you cannot read one unit of zero
	length.  Accommodate for that.
	* compat/strcspn.c(strcspn): End the scan when the source string ends.

2002-02-23  Bruce Korb  <bkorb@gnu.org>

	* Makefile.am: remove a stamp file for DISTCLEAN
	* agen5/agShell.c(sigHandler): declare strsignal() iff HAVE_STRSIGNAL
	is not defined (i.e., we supply our own implementation)
	* autoopts/makeshell.c(emitUsage): emit the preamble from the previous
	version of the file (if it exists).
	(emitSetup): Allow users to supply over-riding defaults
	(setShell): obsolete
	(loadTrailer): renamed
	(openOutput): new name.  Modified to save a pointer to the leader text.
	* autoopts/test/shell.test: modified to cope with default over-rides
	* snprintfv/configure.in(LIBOBJS): ugly hackaround so that autoconf
	won't know we are using the value.

2002-02-04  Bruce Korb  <bkorb@gnu.org>

	* getdefs/getdefs.c: #include strsignal.c when needed
	* getdefs/getdefs.h: don't do it here

2002-02-02  Bruce Korb  <bkorb@gnu.org>

	* config/conf*.tpl: reworked to correspond to web site.
	* configure.in: AG_ENABLE_SHELL renamed to AG_DISABLE_SHELL
	* agen5/agShell.c: ENABLE_SHELL is now SHELL_ENABLED
	* doc/*: added and reworked docs.
	* doc/gnudoc.tpl: template for www.gnu.org/manuals page.
	* doc/mkgnudoc.sh: script to construct above pages

2002-01-30  Bruce Korb  <bkorb@gnu.org>

	* agen5/autogen.c(zSchemeInit): add make-header-guard Scheme function
	(signalExit): use a generated state table
	(ag_abend): dont print template name if we have no active template
	* agen5/autogen.h(teProcState): generate the enumeration
	* agen5/tpLoad.c(mapDataFile): fix arg list

2002-01-28  Bruce Korb  <bkorb@gnu.org>

	* agen5/*.[ch]: error message cleanups.

2002-01-25  Bruce Korb  <bkorb@gnu.org>

	* agen5/autogen.c(signalExit): new routine to do printing outside
	of signal handler context + emit content-type header as needed
	(doneCheck): emit content-type header as needed
	* config/conftest.tpl: renamed from config.tpl

2002-01-22  Bruce Korb  <bkorb@gnu.org>

	* agen5/*fsm*.tpl: reworked to eliminate some inconsistencies

2002-01-21  Bruce Korb  <bkorb@gnu.org>

	* agen5/*.c: handle error messages better
	* agen5/defDirect.c(processDirective): handle ``#!'' as a comment
	directive.  In this fashion, definition files can be made executable,
	to be interpreted by autogen.

2002-01-12  Bruce Korb  <bkorb@gnu.org>

	* agen5/bootstrap.dir: write a function to compute AG, GD and COL
	(set +e): some testing winds up causing a failing false in error
	* agen5/expFormat.c(ag_scm_error): send error messages to pfTrace
	(Public License): change to _General_ Public License
	* agen5/expPrint.c(run_printf): accommodate empty argument lists
	* agen5/expString.c(shellf): add debugging code
	* agen5/functions.c(mLoad_Bogus): allocate the error string so it
	can be handled in the standard way (instead of just fprintf-ing it).
	* agen5/test/error.test(DEFINITIONS ERROR): new format for message
	* agen5/test/html.test(cgi.tpl): for CGI scripts, this template will
	now always be the default, so supply it.  (It avoids requiring
	command line overrides.)
	* config/bootstrap(configure.in): parameterize it 'cuz the standard
	is now named, "configure.ac".
	* config/bootstrap.local(ADD_CONFIG_FILES): dynamically compute the
	list.  It's too hard to remember to grub around inside configure.ac.
	* agen5/autogen.c(autogen-version): add to Guile environment

2002-01-10  Bruce Korb  <bkorb@gnu.org>

	* getdefs/getdefs.c(main): remove warning that is overly common
	* opts/opts.def: Fix up the man page format definitions

2002-01-05  Bruce Korb  <bkorb@gnu.org>

	* agen5/agCgi.c: reopen stderr as stdout so we can direct messages
	to the client, instead of an invisible log file
	* agen5/*.c: refer to GNU General Public License *with* "General".
	* agen5/*.c: change all references from stderr to pfTrace (an alias).
	* agen5/tpParse.c(whichFunc): return UNKNOWN when a name is unknown.
	* agen5/test/html.test: route all queries through "cgi.tpl" and
	depend on a definiton for "template" to source in the correct template.
	* config/bootstrap: parameterize the name of the input configuration
	file.  "configure.ac" is preferred to "configure.in" now.
	* config/bootstrap.local: ditto
	* doc/auto_gen.tpl: cleanup
	* doc/autogen.texi: ditto

2002-01-03  Bruce Korb  <bkorb@gnu.org>

	* agen5/expMake.c: new add makefile-script function
	* agen5/test/make.test: test its functioning

2001-12-28  Bruce Korb  <bkorb@gnu.org>

	* agen5/test/html.test(new): test HTML input
	* autogen/Makefile.am(columns): build before getdefs
	* agen5/agCgi.c(zOops): prefix with HTTP internal error code
	* agen5/funcEval.c(error-source-line): is general purpose function
	* configure.in(AC_CONFIG_FILES): discover the config files
	* config/bootstrap.local(AC_CONFIG_FILES): do the discovering
	* doc/auto_gen.tpl(texi-file-source): find it in either build or src
	* getdefs/Makefile.am(opts.c): derivable file in distribution.

2001-12-24  Bruce Korb  <bkorb@gnu.org>

	* Makefile.am(SUBDIRS): list configured based on --disable-shell
	* configure.in(DEBUG): use a configure test function
	* agen5/agCgi.c(stderr): reopen as stdout.
	* agen5/*.c: rework all error messages.  Ensure that they all
	start with text/plain for CGI output
	* agen5/autogen.h(pzOopsPrefix): new global pointer to prefix
	for all error messages.  empty for non-CGI, "text/plain" for CGI.
	(AG_ABEND_STR): new macro for ABENDing with a string argument

2001-12-20  Bruce Korb  <bkorb@gnu.org>

	* agen5/opts.def(config-header): use new attribute
	* autoopts/opthead.tpl(config-header): include before anything else,
	if it is defined.

2001-12-19  Bruce Korb  <bkorb@gnu.org>

	* getdefs/gdemit.c(emitDefinition): reduce aggressive trimming so line
	leaders can be properly stripped.
	* agen5/opts.def(timeout): this option is pointless if the server shell
	has been disabled.  Now active only if ENABLE_SHELL defined.
	* agen5/agShell.c: disable most everything when ENABLE_SHELL not
	defined.  loadData is left intact because it is otherwise useful.

2001-12-18  Bruce Korb  <bkorb@gnu.org>

	* agen5/agCgi.c: Add a 'Autogen Definitions cgi;' to start of CGI defs.
	* agen5/bootstrap.dir(subblock): extract from sources
	* agen5/expString.c(string-tr): new SCM function: similar to string-tr!
	(string-substitute): new SCM function to support CGI scripting
	* agen5/funcCase.c: add subblock argument for getdefs
	* agen5/test/stack.test: add testing for (string-substitute...)

2001-12-09  Bruce Korb  <bkorb@gnu.org>

	* agen5/agCgi.c: new - reads in GET and POST CGI values
	* agen5/cgi.def: new - FSM for processing CGI text
	* agen5/cgi-fsm.c: new - preserved text for generated FSM
	* agen5/defLoad.c(readDefines): call loadCgi when input is stdin
	and the correct environment variables are set.
	* agen5/bootstrap.dir: regenerate cgi-fsm
	* agen5/Makefile.am: distribute the new sources
